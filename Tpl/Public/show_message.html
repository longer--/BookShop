<include file="Public:head" />
<if condition="($message.refresh eq 1)">
<meta http-equiv="refresh" content="{$message.interval};url={$message.crtPage}">
</if>
</head>
<body>
<!-- header -->
<include file="Public:header" />
<!-- /header -->

<!-- content -->
<div id="content" class="container">
    <div class="row">
        <div class="col-md-12">
            <div class="page-header">
                <h3>{$message.title}</h3>
                <p>{$message.content}</p>
                <small>This page will <a id="lastpage" href="{$message.lastPage}">jump to the previous page</a> in <b id="interval" class="text-info">{$message.interval}</b> seconds</small>
            </div>
        </div>
    </div>
</div>
<!-- /content -->

<!-- footer -->
<include file="Public:footer" />
<!-- /footer -->

<script type="text/javascript">
/** jQuery插件版本：
;(function ($) {
    $.fn.extend({
        'jump': function (options) {
            options = $.extend({
                target:      'interval',
                lastpage:    'lastpage',
                interval:    6,
                speed:       1 * 1000,
                minInterval: 5,
            });
            
            var target = $('#' + options.target),
                href   = $('#' + options.lastpage).attr('href');
            if (!$.isNumeric(target.html()) || target.html() < options.min) target.html(options.interval);
            var timer  = setInterval(function () {
                var interval = target.html();
                if (interval > 0) {
                    target.html(--interval);
                } else {
                    clearInterval(timer);
                    location.href = href;
                }
            }, options.speed);

            return this;
        },
    });
})(jQuery);
(function ($) {
    $.fn.jump();
})(jQuery);*/
/** JS原生版本 */
(function () {
    var target = document.getElementById('interval'),
        href   = document.getElementById('lastpage').href;
    var timer  = setInterval(function () {
        var interval = target.innerHTML;
        if (interval > 0) {
            target.innerHTML = --interval;
        } else {
            clearInterval(timer);
            window.location.href = href;
        }
   }, 1000);
})();
</script>
</body>
</html>
